!function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0==i)return-1;t=+t||0;if(i<=(t=Math.abs(t)===1/0?0:t))return-1;for(n=Math.max(0<=t?t:i-Math.abs(t),0);n<i;){if(n in r&&r[n]===e)return n;n++}return-1});var _json="undefined"!=typeof JSON?JSON:{};_json._stringify=_json.stringify||function(e){var t=typeof e;if("object"!==t||null===e)return"string"===t&&(e='"'+e+'"'),String(e);var n,r,i=[],a=e&&e.constructor==Array;for(n in e)"string"===(t=typeof(r=e[n]))?r='"'+r+'"':"object"===t&&null!==r&&(r=_json._stringify(r)),i.push((a?"":'"'+n+'":')+String(r));return(a?"[":"{")+String(i)+(a?"]":"}")},_json._parse=_json.parse||function(text){var j=null;return text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,""))&&(j=eval("("+text+")")),j};var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,noop=function(){},_isIE=function(){try{var e=window.navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])<=9}catch(e){return!1}},_log_stringify=_isIE(),_log_support="undefined"!=typeof console&&void 0!==console.log,log=function(e){if(_log_support)try{console.log(e)}catch(e){}},logError=function(e){if(_log_support)try{var t=_log_stringify?_json._stringify([].slice.call(arguments)):arguments;isFunction(console.error)?console.error(t):console.log(t)}catch(e){}},logDebug=function(e){if(_log_support)try{var t=_log_stringify?_json._stringify([].slice.call(arguments)):arguments;isFunction(console.debug)?console.debug(t):console.log(t)}catch(e){}},isFunction=function(e){return"function"==typeof e},isArray=function(e){return"[object Array]"==Object.prototype.toString.call(Object(e))},isNode=function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},isElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},isString=function(e){return null!=e&&-1<(e.constructor+"").indexOf("String")},isBlank=function(e){return null==e||-1===(e.constructor+"").indexOf("String")||/^\s*$/.test(e)},isFalsy=function(e){return null==e||"string"!=typeof e&&"number"!=typeof e||"number"==typeof e&&isNaN(e)||1/0==e||-1<(e.constructor+"").indexOf("String")&&/^\s*$/.test(e)},_bind=function(e,t){if(!isFunction(e))return noop;var n=Function.prototype.bind;if(n&&e.bind===n)return n.apply(e,[].slice.call(arguments,1));var r=[].slice.call(arguments,2);return function(){e.apply(t,r)}},startsWith=function(e,t){return 0==e.indexOf(t)},toObject=function(e,t){if(1==t.length&&null!=t[0]&&"object"==typeof t[0]&&!isArray(t[0]))return t[0];for(var n={},r=Math.min(e.length+1,t.length),i=0;i<r;i++)if(isArray(t[i]))i<e.length&&(n[e[i]]=t[i]);else{if("object"==typeof t[i]&&null!=t[i]){for(var a in t[i])t[i].hasOwnProperty(a)&&(n[a]=t[i][a]);break}i<e.length&&(n[e[i]]=t[i])}return n},getElement=function(e){var t=null;return isElement(e)||isNode(e)?t=e:isBlank(e)||(t=(t=document.getElementById(e))||((t=document.getElementsByName(e))&&0<t.length?t[0]:null)),t},getElementSelector=function(e){return isElement(e)||isNode(e)?e.hasAttribute("id")?getAttribute(e,"id"):e.hasAttribute("name")?getAttribute(e,"name"):null:null},getByClassName=function(e,t){return e.querySelectorAll("."+t)},tryEncodeURIComponent=function(e){var t=e;return"object"!=typeof(t=isFunction(e)?e():t)||isArray(t)||(t=_json._stringify(t)),encodeURIComponent instanceof Function?encodeURIComponent(t):t},removeUnicodeSpaces=function(e){return e?e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):""},encodeParentheses=function(e){return tryEncodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29")},createBeaconImage=function(e){var t=document.createElement("img");return t.width=1,t.height=1,t.src=e,t},createScriptElement=function(e,t){var n;e&&((n=document.createElement("script")).type="text/javascript",n.async=!0,n.src=e,t&&isFunction(t)&&(n.onerror=t),(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,t))},listenTo=function(e,t,n,r){try{stopListening(e,t,n),e.addEventListener?e.addEventListener(t,n,!!r):e.attachEvent&&e.attachEvent("on"+t,n)}catch(e){}},stopListening=function(e,t,n){try{e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}catch(e){}},emit=function(e,t,n){try{(n=n||document).dispatchEvent&&n.dispatchEvent(createEvent(e,t))}catch(e){}},getAttribute=function(e,t,n){return n=e?e.getAttribute(t):n},setAttribute=function(e,t,n){if(e)if(isArray(t)&&isArray(n)){t.length<n.length&&(n=n.slice(0,t.length-1));for(var r=0;r<t.length;r++)e.setAttribute(t[r],n[r])}else e.setAttribute(t,n)},addClass=function(e,t){var n="",t=""+t;-1===e.className.split(" ").indexOf(t)&&(n=e.className+" "+t,e.className=n.trim())},removeClass=function(e,t){var n=null,r="",t=""+t;if(-1!==(n=e.className.split(" ")).indexOf(t)){for(var i=0;i<n.length;i++)n[i]&&n[i]!=t&&(r+=n[i]+" ");e.className=r.trim()}},hasClass=function(e,t){t=""+t;return-1!==e.className.split(" ").indexOf(t)},findInputByType=function(e,t,n,r,i){if(r=null,e){i=e.getElementsByTagName(t);for(var a=0;a<i.length;a++)if(n==(getAttribute(i[a],"type")||"").toLowerCase()){r=i[a];break}}return r},isHTTPS=function(){return"https:"==document.location.protocol},getHostname=function(){var e=""+document.location.hostname;return 0==e.indexOf("www.")?e.substring(4):e},getReferrer=function(e){var t=document.referrer;if(/^https?:\/\//i.test(t)){if(e)return t;var n="//"+document.location.hostname,e=t.indexOf(n);return 5!=e&&6!=e||"/"!=(n=t.charAt(e+n.length))&&"?"!=n&&""!=n&&":"!=n?t:void 0}},generateRandomValue=function(){return Math.round(2147483647*Math.random())},generateCacheBuster=function(){try{var e=new Uint32Array(1);return window.crypto.getRandomValues(e),2147483647&e[0]}catch(e){return generateRandomValue()}},hashValue=function(e){var t,n,r=1;if(e)for(r=0,n=e.length-1;0<=n;n--)r=0!=(t=266338304&(r=(r<<6&268435455)+(t=e.charCodeAt(n))+(t<<14)))?r^t>>21:r;return r},DataObject=function(){this.keys=[],this.values={},this.overrides={}};DataObject.prototype.set=function(e,t,n){this.keys.indexOf(""+e)<0&&this.keys.push(""+e),n?this.overrides[":"+e]=t:this.values[":"+e]=t},DataObject.prototype.get=function(e){return(this.overrides.hasOwnProperty(":"+e)?this.overrides:this.values)[":"+e]},DataObject.prototype.map=function(e){for(var t=0;t<this.keys.length;t++){var n=this.keys[t],r=this.get(n);null!=r&&e(n,r)}};for(var generateBrowserHash=function(){for(var e=window.navigator.userAgent+(document.cookie||"")+(document.referrer||""),t=e.length,n=window.history.length;0<n;)e+=n--^t++;return hashValue(e)},objectIdIndex=parseInt(16777215*Math.random(),10),maxBits=[],i=0;i<64;i++)maxBits[i]=Math.pow(2,i);for(var hexTable=[],i=0;i<256;i++)hexTable[i]=(i<=15?"0":"")+i.toString(16);var generateObjectId=function(e){"number"!=typeof e&&(e=parseInt((new Date).getTime()/1e3,10)),objectIdIndex=(objectIdIndex+1)%16777215;for(var t=encodeInt(e,32,!0,!0)+encodeInt(parseInt(16777215*Math.random(),10),24,!1)+encodeInt(Math.floor(1e5*Math.random()),16,!0)+encodeInt(objectIdIndex,24,!1,!0),n="",r=0;r<t.length;r++)n+=hexTable[t.charCodeAt(r)];return n},encodeInt=function(e,t,n,r){var i=maxBits[t];(e=i<=e||e<-i/2?0:e)<0&&(e+=i);for(var a=[];e;a[a.length]=String.fromCharCode(e%256),e=Math.floor(e/256));for(t=-(-t>>3)-a.length;t--;a[a.length]="\0");return(r?a.reverse():a).join("")},validateObjectId=function(e){return null!=e&&((null==e||"number"==typeof e||12==e.length||24==e.length)&&("string"!=typeof e||24!=e.length||isValidObjectId.test(e)))},isOptedOut=function(e){if(window._psPrefs&&window._psPrefs.ioo&&window._psPrefs.ioo()||e&&!0===window["ps-disable-"+e])return!0;try{if(window.external&&window.external._psPrefs&&"oo"==window.external._psPrefs)return!0}catch(e){}return!1},getCookieByName=function(e){var t=[],n=document.cookie.split(";");e=new RegExp("^\\s*"+e+"=\\s*(.*?)\\s*$");for(var r=0;r<n.length;r++){var i=n[r].match(e);i&&t.push(i[1])}return t},createCookie=function(e,t,n,r,i,a){if(!(!isOptedOut(i)&&("/"!=n||!psDomain.test(r))))return!1;n=e+"="+(t=t&&1200<t.length?t.substring(0,1200):t)+"; path="+n+"; ";a&&(n+="expires="+new Date((new Date).getTime()+a).toGMTString()+"; "),r&&"none"!=r&&(n+="domain="+r+";");var o,r=document.cookie;if(document.cookie=n,!(o=r!=document.cookie))e:{for(var s=getCookieByName(e),l=0;l<s.length;l++)if(t==s[l]){o=!0;break e}o=!1}return o},_debounce=function(t,n,r){function i(){var e=(new Date).getTime()-l;e<n&&0<=e?a=setTimeout(i,n-e):(a=null,r||(d=t.apply(s,o),a||(s=o=null)))}var a,o,s,l,d;return function(){s=this,o=arguments,l=(new Date).getTime();var e=r&&!a;return a=a||setTimeout(i,n),e&&(d=t.apply(s,o),s=o=null),d}},_throttle=function(n,r,i){var a,o,s,l=null,d=0;i=i||{};function c(){d=!1===i.leading?0:(new Date).getTime(),l=null,s=n.apply(a,o),l||(a=o=null)}return function(){var e=(new Date).getTime();d||!1!==i.leading||(d=e);var t=r-(e-d);return a=this,o=arguments,t<=0||r<t?(l&&(clearTimeout(l),l=null),d=e,s=n.apply(a,o),l||(a=o=null)):l||!1===i.trailing||(l=setTimeout(c,t)),s}},psDomain=/^(www\.)?pactsafe(\.io?)?(\.[a-z]{2})?$/,isValidSiteId=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,isValidObjectId=/^[0-9a-fA-F]{24}$/,isValidClientLibrary=function(e){return"ps.js"===e||"react-sdk"===e||(console.warn("Invalid client_library value used."),!1)},transportHost=function(){return(_forceSSL||isHTTPS()?"https:":"http:")+"//"+_PactSafe.envAPI},beaconSendError=function(e,t,n,r){isOptedOut(e?e.get(_site_id):"?")||(t=["et=error","_err="+t],e&&(t.push("_lib="+e.get(_client_library)),t.push("_libv="+e.get(_client_version)),t.push("sig="+e.get(_signer_id)),t.push("sid="+e.get(_site_id))),n&&t.push("_dtl="+n),r&&t.push("_msg="+tryEncodeURIComponent(r.substring(0,100))),t.push("nc="+generateRandomValue()),sendWithImage(e,transportHost()+"/send",t.join("&"),null,null,noop),e&&e.get(_event_callback)&&e.get(_event_callback)(r,e.get(_event_type),e.get(_context)))},translationExists=function(e,t){if(!window.XMLHttpRequest)return!1;var n=new window.XMLHttpRequest;return n.open("GET",e,!0),"withCredentials"in n&&(n.withCredentials=!0),n.setRequestHeader("Content-Type","text/plain"),n.onreadystatechange=function(){4==n.readyState&&(t(this.responseText&&-1<this.responseText.indexOf("<Contents>")),n=null)},n.send(),!0};function sendDefault(e,t,n,r,i,a){a=a||noop,(n.length<=2036||!sendWithBeacon(e,t,n,r,i,a)&&!sendWithXHR(e,t,n,r,i,a))&&sendWithImage(e,t,n,r,i,a)}function sendWithImage(e,t,n,r,i,a){if(e&&e.get(_test_mode)&&(log("sendWithImage: "+r+": "+n),e.get(_log_only)))return a(null,r,i);var o=createBeaconImage(t+"?"+n);o.onload=o.onerror=function(){o.onload=null,o.onerror=null,a(null,r,i)}}function sendWithBeacon(e,t,n,r,i,a){if(e&&e.get(_test_mode)){if(!window.navigator.sendBeacon)return;if(log("sendWithBeacon: "+r+": "+n),e.get(_log_only))return a(null,r,i),1}return window.navigator.sendBeacon&&(window.navigator.sendBeacon(t,n)&&(a(null,r,i),1))}function sendWithXHR(t,n,r,i,a,o,s){var e="retrieve"==i;if(t&&t.get(_test_mode)&&(log("sendWithXHR: "+i+": "+r),t.get(_log_only)&&!e))return o(null,i,a),1;if(window.XMLHttpRequest){var l=new window.XMLHttpRequest;"withCredentials"in l&&(l.withCredentials=!0),s=s||0;function d(e){e=e||h||l&&l.statusText,trigger("error",e,i,a),t.get(_silent)||logError(e),l.retry?sendWithXHR(t,n,r,i,a,o,s+1):o(e,i,a,l)}var c,u,_,g,p,f,m,h=null;return l.open("POST",n,!0),l.withCredentials=!0,l.timeout=t.getNumber(_timeout)||2e4,l.setRequestHeader("Content-Type","text/plain"),l.onreadystatechange=function(){if(4===l.readyState&&(u&&t.set(_sending_count,t.getNumber(_sending_count)-1),t.set(_sending,0<t.getNumber(_sending_count)),h=l.responseText,l.getResponseHeader("content-type")&&~l.getResponseHeader("content-type").indexOf("application/json")))try{l.responseJSON=h=JSON.parse(h)}catch(e){h=l.responseText}},l.onloadstart=function(){u=!0,t.set(_sending_count,t.getNumber(_sending_count)+1),t.set(_sending,!0),trigger("sending",i,t.getParams(),a,r)},l.onload=function(){if(4===l.readyState){if(!(200<=l.status&&l.status<300))return d();try{_=l.getResponseHeader("X-Certification-Token"),g=l.getResponseHeader("X-Download-URL"),p=l.getResponseHeader("X-Activity-Batch"),f=l.getResponseHeader("X-Activity-Session"),m=l.getResponseHeader("X-Signer-UUID"),_&&t.set(_download_token,_),g&&t.set(_download_url,g),p&&t.set(_batch,p),f&&t.set(_session,f),m&&t.get(_uuid)!=m&&generateUUID(t,m)}catch(e){}o(null,i,a,l,p)}},l.onerror=function(){c=null,4===l.readyState&&0===l.status&&(c="Send encountered a network error"),d(c)},l.onabort=function(){d("Send aborted by browser")},l.ontimeout=function(){s<t.getNumber(_retry_attempts)&&(l.retry=!0),d("Send timed out")},l.send(r),1}}var TaskStore=function(){this.functions=[]};function optOutFilter(e){if(isOptedOut(getParameterValue(e,_site_id)))throw"opted_out"}function isValidProtocol(){var e=document.location.protocol;if("http:"!=e&&"https:"!=e)throw"invalid_protocol"}function buildAction(e){e.set(_send_count,getParameterNumber(e,_send_count)+1),e.set(_event_payload,e.getPayload(),!0)}function sendAction(e){var t=getParameterValue(e,_transport_url)||transportHost()+"/send",n=getParameterValue(e,_transport),r=getParameterValue(e,_event_type),i=e.get(_context),a=getParameterValue(e,_event_payload),o=e.get(_event_callback)||noop,s="retrieve"==r,l=getParameterNumber(e,_synchronous_sending);!n&&window.navigator.sendBeacon&&(n="beacon"),l&&"xhr"===n&&!s&&(t+="/sync"),s?sendWithXHR(e,t,a,r,i,o):e.get(_disable_sending)?o(null,r,i,a):n?"image"==n?sendWithImage(e,t,a,r,i,o):"xhr"==n&&sendWithXHR(e,t,a,r,i,o)||"beacon"==n&&sendWithBeacon(e,t,a,r,i,o)||sendDefault(e,t,a,r,i,o):sendDefault(e,t,a,r,i,o),e.set(_event_callback,noop,!0)}function validatePreviewState(){if(window.navigator&&"preview"==window.navigator.loadPurpose)throw"preview_state"}TaskStore.prototype.add=function(e){this.functions.push(e)},TaskStore.prototype.executeTasks=function(t){var n=null,e=null,r=null;try{for(var i=0;i<this.functions.length;i++)n=this.functions[i],(e=t.get(n))&&isFunction(e)&&e.call(window,t)}catch(e){var r=e,a="Command aborted on: "+n+", Error: "+(e&&e.name?e.name+": "+e.message:e||"");trigger("error",a,t.get(_event_type),t.get(_context)),t.get(_silent)||logError(a)}a=t.get(_event_callback);a!=noop&&isFunction(a)&&a.call(this,r,t.get(_event_type),t.get(_context))&&t.set(_event_callback,noop,!0)};var anonymousEvents=["visited","displayed"];function validateRequiredParameters(e){var t=e.get(_site_id),n=e.get(_signer_id),r=e.get(_event_type),i=e.get(_external_url);if(isFalsy(t))throw"missing_site_id";if(isFalsy(n)&&-1===anonymousEvents.indexOf(r))throw"missing_signer_id";if(e.get(_external)&&(!i||!i.length))throw"missing_external_url"}function enforceRateLimit(e){var t=getParameterNumber(e,_events_called),n=getParameterValue(e,_event_type);if("agreed"!=n&&"disagreed"!=n){var r=getParameterNumber(e,_sends_available),i=(new Date).getTime(),n=getParameterNumber(e,_last_sent);0==n&&e.set(_last_sent,i);n=Math.round(2*(i-n)/1e3);if(0<n&&(r=Math.min(r+n,20),e.set(_last_sent,i)),r<=0)throw"rate_limit_exceeded";e.set(_sends_available,--r)}e.set(_events_called,++t)}function getFlashVersion(){var e,t,n;if((n=(n=window.navigator)?n.plugins:null)&&n.length)for(var r=0;r<n.length&&!t;r++){var i=n[r];-1<i.name.indexOf("Shockwave Flash")&&(t=i.description)}if(!t)try{t=(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")).GetVariable("$version")}catch(e){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),t="WIN 6,0,21,0",e.AllowScriptAccess="always",t=e.GetVariable("$version")}catch(e){}if(!t)try{t=(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(e){}return t=t&&(e=t.match(/[\d]+/g))&&3<=e.length?e[0]+"."+e[1]+" r"+e[2]:t}var runTiming=function(e,t){var n,r=Math.min(getParameterNumber(e,_speed_sample_rate),100);hashValue(getParameterValue(e,_uuid))%100>=r||!setPageLoadTiming(r={})&&!setExternalPageLoadTiming(r)||(null==(n=r[_loadStep1])||1/0==n||isNaN(n)||(0<n?(validateNumber(r,_loadStep3),validateNumber(r,_loadStep6),validateNumber(r,_loadStep5),validateNumber(r,_loadStep2),validateNumber(r,_loadStep4),validateNumber(r,_loadStep7),validateNumber(r,_loadStep8),t(r)):listenTo(window,"load",function(){runTiming(e,t)},!1)))},setPageLoadTiming=function(e){var t=window.performance||window.webkitPerformance;if(!(t=t&&t.timing))return!1;var n=t.navigationStart;return 0!=n&&(e[_loadStep1]=t.loadEventStart-n,e[_loadStep3]=t.domainLookupEnd-t.domainLookupStart,e[_loadStep6]=t.connectEnd-t.connectStart,e[_loadStep5]=t.responseStart-t.requestStart,e[_loadStep2]=t.responseEnd-t.responseStart,e[_loadStep4]=t.fetchStart-n,e[_loadStep7]=t.domInteractive-n,e[_loadStep8]=t.domContentLoadedEventStart-n,!0)},setExternalPageLoadTiming=function(e){if(window.top!=window)return!1;var t=window.external,n=t&&t.onloadT;return 0<(n=2147483648<(n=t&&!t.isValidLoadTime?void 0:n)?void 0:n)&&t.setPageReadyTime(),null!=n&&(e[_loadStep1]=n,!0)},validateNumber=function(e,t){var n=e[t];(isNaN(n)||1/0==n||n<0)&&(e[t]=void 0)},sendTiming=function(t){return function(e){"displayed"!=e.get(_event_type)||t.initiatedTiming||(t.initiatedTiming=!0,runTiming(e,function(e){t.send("timing",e)}))}},generateUUID=function(e,t){if("cookie"==getParameterValue(e,_storage)){uuidSet=!1;e:{var n=getCookieByName(getParameterValue(e,_cookie_name));if(n&&!(n.length<1)){for(var r=[],i=0;i<n.length;i++){var a=n[i].split("."),o=a.shift(),a="ps"==o&&1<a.length?(1==(o=a.shift().split("-")).length&&(o[1]="1"),o[0]*=1,o[1]*=1,{levels:o,value:a.join(".")}):void 0;a&&r.push(a)}if(1==r.length){l=r[0].value;break e}if(0<r.length){var s=countDomainParts(getParameterValue(e,_cookie_domain));if(1==(r=returnHighestLevelCookie(r,s,0)).length){l=r[0].value;break e}var s=countPathParts(getParameterValue(e,_cookie_path)),l=(r=returnHighestLevelCookie(r,s,1))[0]&&r[0].value;break e}}l=void 0}l&&(e.data.set(_uuid,l),uuidSet=!0)}t&&e.data.set(_uuid,tryEncodeURIComponent(t)),e.get(_uuid)||e.data.set(_uuid,generateObjectId()),setUUIDCookie(e)},setSystemInfo=function(e){var t;e.set(_referrer,getReferrer(e.get(_send_referrer))),document.location&&("/"!=(t=document.location.pathname||"").charAt(0)&&(t="/"+t),e.set(_page_url,document.location.protocol+"//"+document.location.hostname+t+document.location.search),e.set(_page_domain,document.location.host),e.set(_page_path,document.location.pathname)),window.screen&&e.set(_screen_resolution,window.screen.width+"x"+window.screen.height),window.screen&&e.set(_screen_color_depth,window.screen.colorDepth+"-bit"),e.set(_browser_locale,getBrowserLocale()),e.set(_browser_timezone,(new Date).getTimezoneOffset()/60),e.set(_operating_system,detectOperatingSystem()),e.set(_environment,detectEnvironment()),e.set(_jurisdiction,getBrowserLocale())},getBrowserLocale=function(){return(window.navigator&&(window.navigator.language||window.navigator.browserLanguage)||"").toLowerCase()},detectOperatingSystem=function(){var e="Unknown";if(!window.navigator)return e;var t=window.navigator.userAgent;return/(Windows|WinNT4.0|Win16|Win 9x 4.90)/.test(t)?e="Windows":/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh|Mac OS X)/.test(t)?e="MacOS":/Android/.test(t)?e="Android":/CrOS/.test(t)?e="Chrome OS":/(iPhone|iPad|iPod)/.test(t)?e="iOS":/(Linux|X11(?!.*CrOS))/.test(t)?e="Linux":/UNIX/.test(t)?e="UNIX":/GoogleBot/.test(t)&&(e="GoogleBot"),e},detectEnvironment=function(){var e="desktop";return window.navigator?/Mobile|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)&&(e="mobile"):e="other",e},uuidSet=!1,setUUIDCookie=function(e){if("cookie"==getParameterValue(e,_storage)){var t,n,r=getParameterValue(e,_cookie_name),i=generateCookieValue(e),a=prependSlash(getParameterValue(e,_cookie_path)),o=trimPeriod(getParameterValue(e,_cookie_domain)),s=1e3*getParameterNumber(e,_cookie_expires),l=getParameterValue(e,_site_id);if("auto"!=o)createCookie(r,i,a,o,l,s)&&(uuidSet=!0);else{if(subdomains=[],4!=(o=getHostname().split(".")).length||(n=o[o.length-1],parseInt(n,10)!=n)){for(var d=o.length-2;0<=d;d--)subdomains.push(o.slice(d).join("."));subdomains.push("none"),t=subdomains}else t=["none"];for(var c=0;c<t.length;c++)if(o=t[c],e.data.set(_cookie_domain,o),i=generateCookieValue(e),createCookie(r,i,a,o,l,s))return void(uuidSet=!0);e.data.set(_cookie_domain,"auto")}}},validateUUIDCookie=function(e){uuidSet||"cookie"!=getParameterValue(e,_storage)||(setUUIDCookie(e),uuidSet||log("Warning: Unable to set UUID cookie"))},generateCookieValue=function(e){var t=encodeParentheses(getParameterValue(e,_uuid)),n=countDomainParts(getParameterValue(e,_cookie_domain)),e=countPathParts(getParameterValue(e,_cookie_path));return 1<e&&(n+="-"+e),["ps",n,t].join(".")},returnHighestLevelCookie=function(e,t,n){for(var r,i=[],a=[],o=0;o<e.length;o++){var s=e[o];s.levels[n]==t?i.push(s):null==r||s.levels[n]<r?(a=[s],r=s.levels[n]):s.levels[n]==r&&a.push(s)}return 0<i.length?i:a},trimPeriod=function(e){return 0==e.indexOf(".")?e.substr(1):e},countDomainParts=function(e){return trimPeriod(e).split(".").length},prependSlash=function(e){return e?0!=(e=1<e.length&&e.lastIndexOf("/")==e.length-1?e.substr(0,e.length-1):e).indexOf("/")?"/"+e:e:"/"},countPathParts=function(e){return"/"==(e=prependSlash(e))?1:e.split("/").length},ParameterStore=function(e){this.data=new DataObject,e&&(this.context=e)},ParameterDefinitionMap=new DataObject,ParameterDefinitions=[],getParameterValue=function(e,t){t=e.get(t);return null==t?"":""+t},getParameterNumber=function(e,t){t=e.get(t);return null==t||""===t?0:+t},setParameterValue=function(e,t,n,r){var i;null!=n&&t===_site_id&&isValidSiteId.test(n),"client_library"===t&&!isValidClientLibrary(n)||((i=getParameterDefinition(t))&&i.setter?i.setter(e,t,n,r):e.data.set(t,n,r))};ParameterStore.prototype.get=function(e){var t=getParameterDefinition(e),n=this.data.get(e);return t&&null==n&&(n=isFunction(t.defaultValue)?t.defaultValue():t.defaultValue),t&&t.getter?t.getter(this,e,n):n},ParameterStore.prototype.getNumber=function(e){return getParameterNumber(this,e)},ParameterStore.prototype.set=function(e,t,n){if(e)if("object"==typeof e)for(var r in e)e.hasOwnProperty(r)&&setParameterValue(this,r,e[r],n);else setParameterValue(this,e,t,n)},ParameterStore.prototype.extend=function(e,t,n){if(e){var r=getParameterValue(this,e);if(r&&"object"==typeof r||(r={}),t&&"object"==typeof t){for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);setParameterValue(this,e,r,n)}}},ParameterStore.prototype.getParams=function(e){var n,r=this,i={};return e&&this.set(e,void 0,!0),ParameterDefinitionMap.map(function(e,t){t.shortName&&null!=(n=r.get(e))&&(i[e]=n)}),e&&(this.data.overrides={}),i},ParameterStore.prototype.getPayload=function(e){var n,r=this,i=[];return e&&this.set(e,void 0,!0),ParameterDefinitionMap.map(function(e,t){t.shortName&&("slo"===t.shortName&&"agreed"!==r.get("event_type")||null!=(n=r.get(e))&&n!=t.defaultValue&&("boolean"==typeof n&&(n*=1),i.push(t.shortName+"="+tryEncodeURIComponent(n))))}),e&&(this.data.overrides={}),i.push("nc="+generateCacheBuster()),i.join("&")},ParameterStore.prototype.toObject=function(){for(var e,t,n={},r=0;r<this.data.keys.length;r++)e=this.data.keys[r],t=this.get(e),isFunction(t)||(n[e]=t);return n};var ParameterDefinition=function(e,t,n,r,i){this.name=e,this.shortName=t,this.getter=r,this.setter=i,this.defaultValue=n},getParameterDefinition=function(e){var t=ParameterDefinitionMap.get(e);if(!t)for(var n=0;n<ParameterDefinitions.length;n++){var r=ParameterDefinitions[n],i=r[0].exec(e);if(i){t=r[1](i),ParameterDefinitionMap.set(t.name,t);break}}return t},getParameterName=function(n){var r;return ParameterDefinitionMap.map(function(e,t){t.shortName==n&&(r=t)}),r&&r.name},defineParameter=function(e,t,n,r,i){return e=new ParameterDefinition(e,t,n,r,i),ParameterDefinitionMap.set(e.name,e),e.name},defineParameterGroup=function(e,t){ParameterDefinitions.push([new RegExp("^"+e+"$"),t])},defineProperty=function(e,t,n){return defineParameter(e,t,n,void 0,noop)},elementGetter=function(e,t,n){return getElement(n)},elementSetter=function(e,t,n,r){var i=null;n&&(i=isString(n)?n:getElementSelector(n)),e.data.set(t,i=i||n,r)},emitSetter=function(e,t,n,r){e.data.set(t,n,r),r||(trigger("set",t,n,e.context||e),trigger("set:"+t,n,e.context||e),emit("set:"+t,n,e.get(_element)),emit("set",{name:t,value:n},e.get(_element)))},numberSetter=function(e,t,n,r){n=parseInt(n);n&&e.data.set(t,n,r)},_globalName=isString(window.PactSafeObject)&&removeUnicodeSpaces(window.PactSafeObject)||"_ps",_forceSSL=!1,_name=defineProperty("name"),_uuid=defineProperty("uuid","uid"),_cookie_name=defineProperty("cookie_name",void 0,"_psr"),_cookie_domain=defineProperty("cookie_domain"),_cookie_path=defineProperty("cookie_path",void 0,"/"),_cookie_expires=defineProperty("cookie_expires",void 0,63072e3),_storage=defineProperty("storage",void 0,"cookie"),_sample_rate=defineProperty("sample_rate","sf",100),_speed_sample_rate=defineProperty("speed_sample_rate",void 0,1),_send_referrer=defineProperty("send_referrer",void 0,!0),_client_version=defineParameter("client_version","_libv"),_client_library=defineParameter("client_library","_lib"),_site_id=defineParameter("site_id","sid"),_event_type=defineParameter("event_type","et"),_execution_method=defineParameter("execution_method","em"),_signer_id=defineParameter("signer_id","sig",void 0,void 0,emitSetter),_revisions=defineParameter("revisions","rev"),_versions=defineParameter("versions","vid"),_major_versions=defineParameter("major_versions"),_contracts=defineParameter("contracts","cid"),_group=defineParameter("group","gid"),_request=defineParameter("request","srid"),_custom_data=defineParameter("custom_data","cus"),_field_data=defineParameter("field_data","fdt"),_non_interaction=defineParameter("non_interaction","ni"),_external=defineParameter("external","xt"),_external_url=defineParameter("external_url","xtu"),_confirmation_email=defineParameter("confirmation_email","cnf"),_notification_email=defineParameter("notification_email","ntf"),_test_mode=defineParameter("test_mode","tm"),_log_only=defineParameter("log_only"),_silent=defineParameter("silent",void 0,!0),_disable_sending=defineParameter("disable_sending"),_force_send=defineParameter("force_send"),_timeout=defineParameter("timeout",void 0,2e4),_retry_attempts=defineParameter("retry_attempts",void 0,2),_localized=defineParameter("localized",void 0,!1),_page_title=defineParameter("page_title","pat",function(){return document.title||void 0}),_page_url=defineParameter("page_url","pau"),_page_domain=defineParameter("page_domain","pad"),_page_path=defineParameter("page_path","pap"),_page_query=defineParameter("page_query","paq"),_hostname=defineParameter("hostname","hn",getHostname()),_referrer=defineParameter("referrer","ref"),_browser_timezone=defineParameter("browser_timezone","btz"),_browser_locale=defineParameter("browser_locale","bl"),_user_agent=defineParameter("user_agent","bua"),_device_fingerprint=defineParameter("device_fingerprint","df"),_operating_system=defineParameter("operating_system","os"),_environment=defineParameter("environment","env"),_screen_color_depth=defineParameter("screen_color_depth","scd"),_screen_resolution=defineParameter("screen_resolution","res"),_jurisdiction=defineParameter("jurisdiction","jur"),_cookies=defineParameter("cookies","ck"),_nonce=defineParameter("nonce","nc"),_context=defineParameter("_context"),_event_callback=defineParameter("event_callback"),_event_payload=defineParameter("event_payload"),_transport=defineParameter("transport"),_transport_url=defineParameter("transport_url"),_synchronous_sending=defineParameter("synchronous_sending"),_events_called=defineParameter("_ec",void 0,0),_last_sent=defineParameter("_last_sent",void 0,0),_sends_available=defineParameter("_sends_available",void 0,20),_send_count=defineParameter("_s","_s"),_sending_count=defineParameter("_sending_count",void 0,0),_sending=defineParameter("sending",void 0,!1),_rate=defineParameter("_r","_r"),_ct=defineParameter("_ct","_ct"),_batch=defineParameter("batch",void 0,void 0,void 0,emitSetter),_session=defineParameter("session","sess",void 0,void 0,emitSetter),_download_token=defineParameter("download_token"),_download_url=defineParameter("download_url",void 0,void 0,function(e,t,n){return!n&&e.context&&e.context.site&&(n=e.context.site.get(t))&&(n+="&gid="+e.get(_group)),n},emitSetter),_loadStep1=defineParameter("l1","plt"),_loadStep2=defineParameter("l2","pdt"),_loadStep3=defineParameter("l3","dns"),_loadStep4=defineParameter("l4","rrt"),_loadStep5=defineParameter("l5","srt"),_loadStep6=defineParameter("l6","tcp"),_loadStep7=defineParameter("l7","dit"),_loadStep8=defineParameter("l8","clt"),_timingCategory=defineParameter("timingCategory","utc"),_timingVar=defineParameter("timingVar","utv"),_timingLabel=defineParameter("timingLabel","utl"),_timingValue=defineParameter("timingValue","utt");defineParameter("forceSSL",void 0,void 0,function(){return _forceSSL},function(e,t,n){_forceSSL=!!n}),defineParameterGroup("\\&(.*)",function(e){var t=new ParameterDefinition(e[0],e[1]),i=getParameterName(e[0].substring(1));return i&&(t.getter=function(e){return e.get(i)},t.setter=function(e,t,n,r){e.set(i,n,r)},t.shortName=void 0),t});var _key=defineParameter("key","gkey"),_filter=defineParameter("filter","fltr"),_sort=defineParameter("sort","sort"),_type=defineParameter("type","gtyp"),_selector=defineParameter("selector"),_container_selector=defineParameter("container_selector","csel"),_element=defineParameter("_element",void 0,void 0,elementGetter,elementSetter),_custom_styles=defineParameter("custom_styles","csty"),_form_selector=defineParameter("form_selector","fsel",void 0,void 0,emitSetter),_signer_id_selector=defineParameter("signer_id_selector","ssel",void 0,void 0,emitSetter),_contract_html=defineParameter("contract_html",void 0,void 0,void 0,emitSetter),_block_form_submission=defineParameter("block_form_submission","blk"),_force_scroll=defineParameter("force_scroll","fs"),_alert_message=defineParameter("alert_message","amsg"),_acceptance_language=defineParameter("acceptance_language","lang"),_auto_run=defineParameter("auto_run","arun"),_display_all=defineParameter("display_all","disp"),_agreed=defineParameter("agreed",void 0,void 0,void 0,emitSetter),_send_displayed=defineParameter("send_displayed",void 0,!0),_allow_disagreed=defineParameter("allow_disagreed"),_hidden_input_selector=defineProperty("hidden_input_selector"),_dynamic=defineParameter("dynamic","dyn"),_virtual=defineParameter("virtual","vrt"),_render_id=defineParameter("render_id","rdid",void 0,void 0,emitSetter),_render_data=defineParameter("render_data","rnd"),_scroll_listener=defineParameter("_scroll_listener"),_policy=defineParameter("policy"),_target_jurisdictions=defineParameter("target_jurisdictions"),_snapshot_location=defineParameter("snapshot_location","slo"),_object_name=defineParameter("object_name"),_contract_class=defineParameter("contract_class"),_data_attr=defineParameter("data_attr"),_respondent_id=defineParameter("respondent_id",void 0,void 0,function(e){return e.get(_signer_id)},function(e,t,n,r){e.set(_signer_id,n,r)}),_agreements=defineParameter("agreements",void 0,void 0,function(e){return e.get(_contracts)},function(e,t,n,r){e.set(_contracts,n,r)}),_agreement_group=defineParameter("agreement_group",void 0,void 0,function(e){return e.get(_group)},function(e,t,n,r){e.set(_group,n,r)}),_respondent_id_selector=defineParameter("respondent_id_selector",void 0,void 0,function(e){return e.get(_signer_id_selector)},function(e,t,n,r){e.set(_signer_id_selector,n,r)}),_agreement_html=defineParameter("agreement_html",void 0,void 0,function(e){return e.get(_contract_html)},function(e,t,n,r){e.set(_contract_html,n,r)}),_src=defineProperty("src"),_class_name=defineProperty("class_name"),_target_selector=defineParameter("target_selector"),_style=defineParameter("style","sty"),_position=defineParameter("position",void 0,void 0,void 0,emitSetter),_stylesheet=defineParameter("stylesheet"),_legal_center_url=defineParameter("legal_center_url"),_open_legal_center=defineParameter("open_legal_center"),_always_visible=defineParameter("always_visible",void 0,void 0,void 0,emitSetter),_badge_text=defineParameter("badge_text"),_badge_updater=defineParameter("badge_updater"),_scroll_element=defineParameter("scroll_element",void 0,void 0,elementGetter,elementSetter),_badge_element=defineParameter("badge_element",void 0,void 0,elementGetter,elementSetter),_update_interval=defineParameter("update_interval",void 0,250,void 0,numberSetter),_mutation_observer=defineParameter("mutation_observer"),_optOutTask=defineProperty("_oot"),_previewTask=defineParameter("previewTask"),_checkProtocolTask=defineParameter("checkProtocolTask"),_validationTask=defineParameter("validationTask"),_checkStorageTask=defineParameter("checkStorageTask"),_rateLimitTask=defineParameter("_rlt"),_buildActionTask=defineParameter("buildActionTask"),_sendActionTask=defineParameter("sendActionTask"),_timingTask=defineParameter("timingTask");function defineMethod(n,r,e){r[n]=function(){try{return e.apply(this,arguments)}catch(e){var t=e&&e.name+": "+e.message;throw trigger("error",t,n,r),logError(e),beaconSendError(null,"exec",n,t),e}}}var GroupStore=function(){this.initialized=new DataObject,this.loaded=new DataObject},GroupDefinitionMap=new DataObject;GroupStore.prototype.get=function(e){return this.initialized.get(e)},GroupStore.prototype.add=function(e,t,n,r,i){var a;t&&("object"==typeof n?a=n:isFunction(n)?a=new n(r):isString(n)&&GroupDefinitionMap.get(n)&&(a=new(GroupDefinitionMap.get(n).factory)(r))),a&&(a.site=e,this.initialized.set(t,a),void 0===e||e.group||(e.group=a),trigger("initialized",t,a),emit("initialized",a,a.get(_element)),i&&isFunction(i)&&i.call(this,null,a))},GroupStore.prototype.getLoading=function(e){return this.loaded.get(e)},GroupStore.prototype.setLoading=function(e,t){e&&this.loaded.set(e,t)};var GroupDefinition=function(e,t){this.type=e,this.factory=t},defineGroup=function(e,t){isFunction(t)||(t=noop);t=new GroupDefinition(e,t);return GroupDefinitionMap.set(t.type,t),t.type},Site=function(e){var n=this;function r(e,t){n.parameters.data.set(e,t)}function t(e,t){r(e,t),n.tasks.add(e)}n.parameters=new ParameterStore(n),n.tasks=new TaskStore,n.groups=new GroupStore,r(_name,e[_name]),r(_site_id,removeUnicodeSpaces(e[_site_id])),r(_cookie_name,e[_cookie_name]),r(_cookie_domain,e[_cookie_domain]||"auto"),r(_cookie_path,e[_cookie_path]),r(_cookie_expires,e[_cookie_expires]),r(_sample_rate,e[_sample_rate]),r(_speed_sample_rate,e[_speed_sample_rate]),r(_send_referrer,e[_send_referrer]),r(_localized,e[_localized]),r(_storage,e[_storage]),r(_signer_id,e[_signer_id]||e[_respondent_id]),r(_custom_data,e[_custom_data]),r(_field_data,e[_field_data]),r(_event_callback,e[_event_callback]),r(_test_mode,e[_test_mode]),r(_log_only,e[_log_only]),r(_silent,e[_silent]),r(_disable_sending,e[_disable_sending]),r(_force_send,e[_force_send]),r(_dynamic,e[_dynamic]),r(_transport,e[_transport]||"xhr"),r(_transport_url,e[_transport_url]),r(_synchronous_sending,e[_synchronous_sending]),r(_client_version,"1.5.1"),r(_client_library,"ps.js"),t(_optOutTask,optOutFilter),t(_previewTask,validatePreviewState),t(_checkProtocolTask,isValidProtocol),t(_validationTask,validateRequiredParameters),t(_checkStorageTask,validateUUIDCookie),t(_rateLimitTask,enforceRateLimit),t(_buildActionTask,buildAction),t(_sendActionTask,sendAction),t(_timingTask,sendTiming(n)),generateUUID(n.parameters,e[_uuid]),setSystemInfo(n.parameters),_listenTo("set:"+_signer_id,_bind(n.render,n))};Site.prototype.toString=function(){return"[object Site]"},Site.prototype.toJSON=function(){return this.getParams()},Site.prototype.get=function(e){return this.parameters.get(e)},Site.prototype.set=function(e,t){this.parameters.set(e,t)},Site.prototype.extend=function(e,t){this.parameters.extend(e,t)},Site.prototype.getParams=function(e){return this.parameters.getParams(e)},Site.prototype.getPayload=function(e){return this.parameters.getPayload(e)},Site.prototype.getByKey=function(e){return this.groups.get(e)},Site.prototype.getAllGroups=function(){var n=[];return this.groups.initialized.map(function(e,t){n.push(t)}),n};var sendCommandOptions={agreed:[_contracts,_versions,_group,_event_callback],disagreed:[_contracts,_versions,_group,_event_callback],displayed:[_contracts,_versions,_group,_event_callback],updated:[],retrieve:[_contracts,_event_callback],visited:[_contracts,_versions,_group,_event_callback],timing:[_timingCategory,_timingVar,_timingValue,_timingLabel]};Site.prototype.send=function(e){var t,n,r;arguments.length<1||(r="string"==typeof e?(t=e,[].slice.call(arguments,1)):(t=e&&e[_event_type],arguments),t&&(n=(r=toObject(sendCommandOptions[t]||[],r))[_event_callback]||this.parameters.get(_event_callback)||noop,r[_event_type]=t,r[_context]=r[_context]||this,r[_event_callback]=wrapCallback(n,r),this.parameters.set(r,void 0,!0),this.tasks.executeTasks(this.parameters),this.parameters.data.overrides={}))},Site.prototype.retrieve=function(e){var t,n,r;arguments.length<1||(r=(n=toObject(sendCommandOptions[t="retrieve"],arguments))[_event_callback]||this.parameters.get(_event_callback)||noop,n[_event_type]=t,n[_transport_url]=transportHost()+"/"+t,n[_transport]="xhr",n[_event_callback]=parseRetrieve(r),n[_context]=n[_context]||this,this.parameters.set(n,void 0,!0),this.tasks.executeTasks(this.parameters),this.parameters.data.overrides={})},Site.prototype.initialize=function(e){if(!(arguments.length<2)){var t=e,n=arguments[1],r=2<arguments.length&&"object"==typeof arguments[2]?arguments[2]:{},i=this.groups.getLoading(t),a=noop;if(!1!==i){if(i&&!0!==i&&(i[_event_callback]&&isFunction(i[_event_callback])&&(a=i[_event_callback]),"object"==typeof i))for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o]);i||this.groups.setLoading(t,!0),this.groups.add(this,t,n,r,a)}}};var loadCommandOptions=[_selector,_event_callback];Site.prototype.load=function(e){var t,n,r,i,a,o,s,l;arguments.length<1||(isString(l=e)||(l=null),!(s=e&&"object"==typeof e&&e.hasOwnProperty("filter")||1<arguments.length&&arguments[1]&&"object"==typeof arguments[1]&&arguments[1].hasOwnProperty("filter")?!0:s)&&isBlank(l)||(3==arguments.length&&isFunction(arguments[2])?(t=toObject(loadCommandOptions,[arguments[1]]))[_event_callback]=arguments[2]:t=toObject(loadCommandOptions,s&&1==arguments.length?[].slice.call(arguments,0):[].slice.call(arguments,1)),l||(l="group-"+(new Date).getTime().toString(),t[_virtual]=!0),t[_key]=l,n=t[_event_callback]&&isFunction(t[_event_callback])?t[_event_callback]:noop,this.groups.getLoading(l)?this.groups.get(l)?n.call(this,null,this.groups.get(l)):this.groups.setLoading(l,t):(this.groups.setLoading(l,t),this.parameters.set(t,void 0,!0),o=this.get(_dynamic)||s,r=(_forceSSL||isHTTPS()?"https:":"http:")+"//"+(o?_PactSafe.envAPI:_PactSafe.envVault)+"/",s=this.get(_browser_locale),a=o?(i="load/",buildAction(this.parameters),"group.js?"+this.parameters.get(_event_payload)):(i="s/"+this.get(_site_id)+"/groups/"+l+"/","group.js"),this.parameters.data.overrides={},null!=t[_src]?createScriptElement(t[_src],n):!o&&this.get(_localized)&&s&&0!=s.indexOf("en")?translationExists(r+"?prefix="+i+(a="group-"+s+".js")+"&max-keys=1",function(e){createScriptElement(r+i+(a=!e?"group.js":a),n)}):createScriptElement(r+i+a,n))))},Site.prototype.render=function(e){var n=[].slice.call(arguments);this.groups.initialized.map(function(e,t){t.render&&t.render.apply(t,n)})},Site.prototype.resetSystemInfo=function(){setSystemInfo(this.parameters)};var wrapCallback=function(a,o){return function(e,t,n,r,i){a(e,t,n,r,i),e||trigger("sent",t,{contracts:o[_contracts],versions:o[_versions],group:o[_group]},n,r,i)}},parseRetrieve=function(a){return function(e,t,n,r){var i;if(r&&r.response)try{i=_json._parse(r.responseText)}catch(e){}n&&isFunction(n.handleRetrieve)?n.handleRetrieve(e,i,r,n):e||trigger("retrieved",i,r,n),a(e,i,r,n)}};function createEvent(e,t){var n;return isFunction(document.defaultView.CustomEvent)?n=new CustomEvent(e,{bubbles:!0,cancelable:!1,detail:t}):document.createEvent?(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!1):document.createEventObject&&((n=document.createEventObject()).eventType=e),n.eventName=e,n}var ClickwrapGroup=function(e){var n=this;function t(e,t){n.parameters.data.set(e,t)}n.parameters=new ParameterStore(n),n.agreed=new ParameterStore(n),n.checked=new ParameterStore(n),n.displayed={},n.sent={},n.rendered=!1,n.inputInjected=!1,n.signerIdListening=!1,t(_object_name,e[_contracts]?"contract":"agreement"),t(_contract_class,"ps-"+n.get(_object_name)),t(_data_attr,e[_contracts]?"cid":"aid"),t(_key,e[_key]),t(_type,e[_type]),t(_style,e[_style]),t(_policy,e[_policy]),t(_target_jurisdictions,e[_target_jurisdictions]),t(_execution_method,e[_execution_method]),t(_group,e[_group]||e[_agreement_group]),t(_request,e[_request]),t(_container_selector,e[_selector]||e[_container_selector]),t(_form_selector,e[_form_selector]),t(_hidden_input_selector,e[_hidden_input_selector]||"__ps-"+n.get(_object_name)+"s"),t(_element,e[_selector]||e[_container_selector]),t(_signer_id_selector,e[_signer_id_selector]||e[_respondent_id_selector]),t(_contracts,e[_contracts]||e[_agreements]||[]),t(_versions,e[_versions]||[]),t(_major_versions,e[_major_versions]||[]),t(_revisions,e[_revisions]),t(_contract_html,e[_contract_html]||e[_agreement_html]),t(_block_form_submission,e[_block_form_submission]),t(_force_scroll,e[_force_scroll]),t(_alert_message,e[_alert_message]||""),t(_auto_run,e[_auto_run]),t(_display_all,e[_display_all]),t(_confirmation_email,e[_confirmation_email]),t(_send_displayed,e[_send_displayed]),t(_allow_disagreed,e[_allow_disagreed]),t(_agreed,!1),t(_snapshot_location,e[_snapshot_location]),t(_acceptance_language,e[_acceptance_language]),t(_dynamic,e[_dynamic]),t(_render_id,e[_render_id]),t(_render_data,e[_render_data]),n.resetData(),_PactSafe("onReady",function(){n.listenForElement(n.get(_container_selector),_bind(n.render,n))}),n.get(_signer_id_selector)?_PactSafe("onReady",function(){n.listenForElement(n.get(_signer_id_selector),_bind(n.listenForSignerId,n))}):_listenTo("set:"+_signer_id_selector,function(){n.listenForElement(n.get(_signer_id_selector),_bind(n.listenForSignerId,n))}),n.get(_form_selector)||_listenTo("set:"+_form_selector,function(){n.listenForElement(n.get(_form_selector),_bind(n.injectHiddenInput,n))})};ClickwrapGroup.prototype.toString=function(){return"[object ClickwrapGroup]"},ClickwrapGroup.prototype.toJSON=function(){return this.getParams()},ClickwrapGroup.prototype.get=function(e){return this.parameters.get(e)},ClickwrapGroup.prototype.set=function(e,t){this.parameters.set(e,t)},ClickwrapGroup.prototype.extend=function(e,t){this.parameters.extend(e,t)},ClickwrapGroup.prototype.getParams=function(e){return e=this.getOverrides(e),this.site.getParams(e)},ClickwrapGroup.prototype.getPayload=function(e){return e=this.getOverrides(e),this.site.getPayload(e)},ClickwrapGroup.prototype.getOverrides=function(e){var t=this;return(e=!e||"object"!=typeof e?{}:e)[_contracts]=e[_contracts]||t.get(_contracts),e[_versions]=e[_versions]||t.get(_versions),e[_revisions]=e[_revisions]||t.get(_revisions),e[_group]=t.get(_group),e[_request]=t.get(_request),e[_confirmation_email]=t.get(_confirmation_email),e[_execution_method]=e[_execution_method]||t.get(_execution_method),e[_dynamic]=t.get(_dynamic),e[_render_id]=t.get(_render_id),t.get(_render_data)&&(e[_render_data]=t.get(_render_data)),e[_context]=t,e},ClickwrapGroup.prototype.send=function(e){var r,i,a,o=this;arguments.length<1||(a="string"==typeof e?(r=e,[].slice.call(arguments,1)):(r=e&&e[_event_type],arguments),r&&(a=toObject(sendCommandOptions[r]||[],a),(a=o.getOverrides(a))[_event_type]=r,!(i=isFunction(a[_event_callback])?a[_event_callback]:null)&&isFunction(o.site.get(_event_callback))&&(i=o.site.get(_event_callback)),a[_event_callback]=function(e){if(!e){if("agreed"==r)for(var t=o.site.get(_signer_id),n=0;n<a[_contracts].length;n++)o.agreed.data.set(a[_contracts][n],!0),o.sent[a[_contracts][n]]=t;else if("disagreed"==r)for(n=0;n<a[_contracts].length;n++)o.agreed.data.set(a[_contracts][n],!1),o.sent[a[_contracts][n]]=!1;emit(r,a,o.get(_element))}o.updateHiddenInput(!o.block()),i&&isFunction(i)&&i.apply(this,arguments)},o.site.send(r,a)))},ClickwrapGroup.prototype.getData=function(){var e=this,t={};return t[_contracts]=e.get(_contracts),t[_versions]=e.get(_versions),t[_group]=e.get(_group),e.get(_revisions)&&(t[_revisions]=e.get(_revisions)),e.get(_request)&&(t[_request]=e.get(_request)),e.get(_render_id)&&(t[_render_id]=e.get(_render_id)),e.get(_render_data)&&(t[_render_data]=e.get(_render_data)),e.get(_acceptance_language)&&(t[_acceptance_language]=e.get(_acceptance_language)),t},ClickwrapGroup.prototype.getAgreed=function(){for(var e=this,t=e.get(_contracts),n=e.get(_versions),r=e.get(_revisions),i=[],a=[],o=[],s=0;s<t.length;s++)e.agreed.data.get(t[s])&&(i.push(t[s]),a.push(n[s]),r&&o.push(r[s]));var l={};return l[_contracts]=i,l[_versions]=a,l[_group]=e.get(_group),r&&(l[_revisions]=o),e.get(_request)&&(l[_request]=e.get(_request)),e.get(_render_id)&&(l[_render_id]=e.get(_render_id)),l},ClickwrapGroup.prototype.getInvalid=function(){for(var e=this,t=e.get(_contracts),n=e.get(_versions),r=e.get(_revisions),i=[],a=[],o=[],s=0;s<t.length;s++)e.agreed.data.get(t[s])||(i.push(t[s]),a.push(n[s]),r&&o.push(r[s]));var l={};return l[_contracts]=i,l[_versions]=a,l[_group]=e.get(_group),r&&(l[_revisions]=o),e.get(_request)&&(l[_request]=e.get(_request)),e.get(_render_id)&&(l[_render_id]=e.get(_render_id)),l},ClickwrapGroup.prototype.getChecked=function(e){for(var t=this,n=t.get(_contracts),r=t.get(_versions),i=t.get(_revisions),a=t.site.get(_signer_id),o=[],s=[],l=[],d=0;d<n.length;d++)!t.checked.data.get(n[d])||e&&t.sent[n[d]]===a||(o.push(n[d]),s.push(r[d]),i&&l.push(i[d]));var c={};return c[_contracts]=o,c[_versions]=s,c[_group]=t.get(_group),i&&(c[_revisions]=l),t.get(_request)&&(c[_request]=t.get(_request)),t.get(_render_id)&&(c[_render_id]=t.get(_render_id)),c},ClickwrapGroup.prototype.sendChecked=function(e){e=this.getChecked(e);return!!e[_contracts].length&&(this.send("agreed",e),!0)},ClickwrapGroup.prototype.sendDisplayed=function(){var e=this,t=e.get(_element),n=e.site.get(_signer_id)||!1,r=[],i=[],a=[];if(t&&n){for(var o=e.getContractElements(),s=e.get(_data_attr),l=0;l<o.length;l++)"block"==o[l].style.display&&(r=r.concat((getAttribute(o[l],"data-"+s)||"").split(",")),i=i.concat((getAttribute(o[l],"data-vid")||"").split(",")),a=a.concat((getAttribute(o[l],"data-rev")||"").split(",")));if(r.length){var d={};d[_contracts]=[],d[_versions]=[],a.length&&(d[_revisions]=[]);for(l=0;l<r.length;l++)e.displayed[r[l]]!==n&&(e.displayed[r[l]]=n,d[_contracts].push(r[l]),d[_versions].push(i[l]),a.length&&d[_revisions].push(a[l]));e.get(_render_id)&&(d[_render_id]=e.get(_render_id)),d[_contracts].length&&e.get(_send_displayed)&&e.send("displayed",d)}}},ClickwrapGroup.prototype.listenForElement=function(n,r){var i=!1,a=function(e,t){i||getElement(n)&&(i=!0,t&&isFunction(t.disconnect)?t.disconnect():stopListening(document,"DOMNodeInserted",a,!1),r&&isFunction(r)&&r.call(this))},e=null;window.MutationObserver&&isFunction(window.MutationObserver)?(e=new MutationObserver(a)).observe(document,{attributes:!0,childList:!0,subtree:!0}):listenTo(document,"DOMNodeInserted",a,!1),a(0,e)},ClickwrapGroup.prototype.listenForSignerId=function(){var e=getElement(this.get(_signer_id_selector));e&&!this.signerIdListening&&(this.signerIdListening=!0,e.value&&this.site.set(_signer_id,e.value),listenTo(e,"change",_bind(this.handleInput,this)),listenTo(e,"autofill",_bind(this.handleInput,this)))},ClickwrapGroup.prototype.injectHiddenInput=function(){var e,t=getElement(this.get(_form_selector));t&&!this.inputInjected&&(this.inputInjected=!0,e=document.createElement("input"),setAttribute(e,["type","name","class"],["hidden",this.get(_hidden_input_selector),this.get(_hidden_input_selector)]),e.value=!1,t.appendChild(e)),this.updateHiddenInput(!this.block())},ClickwrapGroup.prototype.updateHiddenInput=function(e){var t=getElement(this.get(_form_selector)),n=this.get(_element),r=this.get(_agreed)!=e;this.set(_agreed,e),n&&(setAttribute(n,"data-all-agreed",e),this.updateAgreedAttributes()),t&&this.inputInjected&&((t=getByClassName(t,this.get(_hidden_input_selector)))&&0<t.length&&(t[0].value=e),!this.get(_block_form_submission)||(t=this.getFormSubmit())&&t.setCustomValidity&&isFunction(t.setCustomValidity)&&t.setCustomValidity(e?"":this.get(_alert_message))),r&&setTimeout(_bind(function(){trigger(e?"valid":"invalid",this.getData(),this)},this),0),setTimeout(_bind(function(){trigger("validated",e,{agreed:this.allAgreed(),checked:this.allChecked()},this),emit("validated",e,n)},this),0)},ClickwrapGroup.prototype.updateAgreedAttributes=function(){if(this.get(_element))for(var e=this.getContractElements(),t=!1,n=this.get(_data_attr),r=0;r<e.length;r++){for(var i=(getAttribute(e[r],"data-"+n)||"").split(","),t=!0,a=0;a<i.length;a++)if(!1===this.agreed.data.get(i[a])){t=!1;break}setAttribute(e[r],"data-agreed",t)}},ClickwrapGroup.prototype.getContractElements=function(){var e=this.get(_element);return e?getByClassName(e,this.get(_contract_class)):[]},ClickwrapGroup.prototype.getFormSubmit=function(){var e,t=getElement(this.get(_form_selector));return e=t?findInputByType(t,"input","submit")||findInputByType(t,"button","submit"):e},ClickwrapGroup.prototype.resetData=function(){var e=this,t=e.get(_contracts);e.displayed={},e.sent={};for(var n=0;n<t.length;n++)e.agreed.data.set(t[n],!1),e.checked.data.set(t[n],!1)},ClickwrapGroup.prototype.render=function(e){var t,n=this,r=n.get(_element);if(n.rendered&&!0!==e||(n.injectHiddenInput(),r&&(n.injectHTML(r),n.rendered=!0,setTimeout(function(){trigger("rendered",n),emit("rendered",n,r)},0))),n.get(_policy)&&n.buildDynamicSignerLinks(),n.rendered)if(n.get(_display_all)&&n.displayAll(),n.site.get(_signer_id))n.get(_auto_run)?(t=isFunction(n.site.get(_event_callback))?n.site.get(_event_callback):noop,n.site.retrieve({contracts:n.get(_contracts),_context:n,event_callback:function(){t.apply(this,arguments),n.display.apply(n,arguments)}})):n.site.retrieve({contracts:n.get(_contracts),_context:n});else for(var i=n.get(_contracts),a=0;a<i.length;a++)n.agreed.data.set(i[a],!1)},ClickwrapGroup.prototype.buildDynamicSignerLinks=function(){for(var e=this,t=e.get(_element),n=getByClassName(t,"ps-contract-link"),r=getElement("ps-group-"+e.get(_key)).getAttribute("data-legal"),i=0;i<n.length;i++){var a={};e.get(_group)&&(a.g=e.get(_group)),e.site.get(_jurisdiction)&&(a.jur=e.site.get(_jurisdiction)),e.site.get(_signer_id)&&(a.sig=encodeURIComponent(e.site.get(_signer_id))),e.site.get(_test_mode)&&(a.tm=encodeURIComponent(e.site.get(_test_mode)));var o,s=r;for(o in a)s+=-1!=s.indexOf("?")?"&":"?",s+=o+"="+a[o];n[i].getAttribute("data-ckey")&&(s+="#"+n[i].getAttribute("data-ckey")),n[i].setAttribute("href",s)}},ClickwrapGroup.prototype.injectHTML=function(e){if(e){var t=this.get(_contracts),n=this.get(_object_name);e.innerHTML=this.get(_contract_html);var r=getByClassName(e,"ps-"+n+"-target"),i=getByClassName(e,"ps-expand-button"),a=getByClassName(e,"ps-collapse-button"),o=getByClassName(e,"ps-"+n+"-body"),s=getByClassName(e,"ps-attr");this.get(_force_scroll)&&this.setupScrollListeners();for(var l=0;l<r.length;l++)"BUTTON"==r[l].tagName?listenTo(r[l],"click",_bind(this.handleClick,this),!1):listenTo(r[l],"change",_bind(this.handleClick,this),!1),o&&0<o.length&&listenTo(r[l],"change",_bind(this.togglePane,this),!1);for(l=0;l<s.length;l++)listenTo(s[l],"change",_bind(this.handleAttributeInput,this)),listenTo(s[l],"autofill",_bind(this.handleAttributeInput,this));for(var d=0;d<i.length;d++)listenTo(i[d],"click",_bind(this.togglePane,this),!1);for(d=0;d<a.length;d++)listenTo(a[d],"click",_bind(this.togglePane,this),!1);for(l=0;l<t.length;l++)this.checked.data.set(t[l],!1);this.updateHiddenInput(!this.block())}},ClickwrapGroup.prototype.setupScrollListeners=function(){var e=this.get(_element),t=getByClassName(e,"ps-contract-force-scroll"),n=_bind(this.handleScroll,this);this.set(_scroll_listener,n);for(var r=0;r<t.length;r++)listenTo(t[r],"scroll",n,!1);setTimeout(function(){for(var e=0;e<t.length;e++)n({target:t[e]})},250)},ClickwrapGroup.prototype.handleScroll=function(e){if(e&&e.target){var t=this.get(_element),n=e.target,r=[].slice.call(getByClassName(n,"ps-contract-scroll-bottom")),i=getByClassName(t,"ps-contract-scroll-bottom").length;hasClass(n,"ps-contract-scroll-bottom")&&r.push(n);for(var a=r.length,o=0;o<r.length;o++)Math.ceil(1+n.scrollTop+n.clientHeight)>=r[o].scrollHeight&&(--a,--i,this.unblockScroll(r[o]));i||this.unblockScroll(),a&&i||stopListening(n,"scroll",this.get(_scroll_listener),!1)}},ClickwrapGroup.prototype.unblockScroll=function(e){var t;if(e){removeClass(e,"ps-contract-scroll-bottom");var n,r,i,a=getAttribute(e,"data-cid");a&&(n=getElement("ps-contract-"+a),r=getElement("ps-scroll-message-"+a),i=getElement("ps-checkbox-clickable-"+a),r&&(r.style.display="none"),i&&(i.style.display="block"),setAttribute(n,"data-scrolled",!0),trigger("scrolled:contract",n,this),emit("scrolled:contract",this,n))}else{for(e=this.get(_element),r=getByClassName(e,"ps-scroll-message"),i=getByClassName(e,"ps-checkbox-clickable"),t=0;t<r.length;t++)r[t].style.display="none";for(t=0;t<i.length;t++)i[t].style.display="block";trigger("scrolled",e,this),emit("scrolled",this,e)}},ClickwrapGroup.prototype.retrieveHTML=function(e){if(!window.XMLHttpRequest)return!1;var t=this,n=new window.XMLHttpRequest,r=transportHost()+"/load/html";e&&t.set(_render_data,e);e=t.getData();t.site.parameters.set(e,void 0,!0),buildAction(t.site.parameters);e=t.site.get(_event_payload);return t.site.parameters.data.overrides={},n.open("POST",r,!0),"withCredentials"in n&&(n.withCredentials=!0),n.setRequestHeader("Content-Type","text/plain"),n.onreadystatechange=function(){if(4==n.readyState){try{var e=n.getResponseHeader("X-Render-ID");e&&t.set(_render_id,e)}catch(e){}t.set(_contract_html,n.responseText),t.resetData(),t.render(!0),n=null}},n.send(e),!0},ClickwrapGroup.prototype.handleRetrieve=function(e,t,n,r){if(t&&"object"==typeof t){var i,a,o,s=this.get(_contracts),l=this.get(_major_versions);for(o in l&&l.length||(l=this.get(_versions)),t)t.hasOwnProperty(o)&&(i=parseInt(o),0<=(a=s.indexOf(i))&&(!t[o]||t[o]!=l[a]&&"true"!=t[o]?this.agreed.data.set(i,!1):this.agreed.data.set(i,!0)))}e||trigger("retrieved",t,n,r),!this.site.get(_disable_sending)&&this.sendChecked(!0)||this.updateHiddenInput(!this.block())},ClickwrapGroup.prototype.display=function(){var e;this.get(_display_all)?this.displayAll():this.get(_policy)?(e=this.get(_target_jurisdictions),isArray(e)&&e.length&&!(-1<e.indexOf(this.site.get(_jurisdiction)))||this.displayRequired()):this.displayRequired()},ClickwrapGroup.prototype.displayRequired=function(){if(this.get(_element)){for(var e,t,n=this.getContractElements(),r=this.get(_data_attr),i=0;i<n.length;i++)if((t=(getAttribute(n[i],"data-"+r)||"").split(",")).length)for(var a=0;a<t.length;a++)if(!1===this.agreed.data.get(t[a])&&!1===this.agreed.data.get(t[a])){e="block"!=n[i].style.display,n[i].style.display="block",e&&setTimeout(_bind(function(e){trigger("displayed",e,this),emit("displayed",this,e)},this,n[i]),0);break}this.get(_policy)&&this.displayOptOut(n),this.sendDisplayed()}},ClickwrapGroup.prototype.displayAll=function(){if(this.get(_element)){for(var e,t=this.getContractElements(),n=this.get(_data_attr),r=0;r<t.length;r++)t[r].hasAttribute("data-"+n)&&(e="block"!=t[r].style.display,t[r].style.display="block",e&&setTimeout(_bind(function(e){trigger("displayed",e,this),emit("displayed",this,e)},this,t[r]),0));this.get(_policy)&&this.displayOptOut(t),this.sendDisplayed()}},ClickwrapGroup.prototype.displayOptOut=function(e){for(var t=0;t<e.length;t++)if(cid=(getAttribute(e[t],"data-"+this.get(_data_attr))||"").split(","),cid.length)for(var n=0;n<cid.length;n++)!0===this.agreed.data.get(cid[n])&&(e[t].parentElement.getElementsByClassName("opt-out-container")[0].style.display="inline")},ClickwrapGroup.prototype.hide=function(e){if(e&&(e=isArray(e)?e:[e],this.get(_element)))for(var t,n,r=this.getContractElements(),i=this.get(_data_attr),a=0;a<r.length;a++)for(var o=(getAttribute(r[a],"data-"+i)||"").split(","),s=0;s<o.length;s++)if(n=parseInt(o[s]),!isNaN(n)&&-1<e.indexOf(n)){t="none"==r[a].style.display,r[a].style.display="none",t||setTimeout(_bind(function(e){trigger("hidden",e,this),emit("hidden",this,e)},this,r[a]),0);break}},ClickwrapGroup.prototype.hideAll=function(){if(this.get(_element))for(var e,t=this.getContractElements(),n=this.get(_data_attr),r=0;r<t.length;r++)t[r].hasAttribute("data-"+n)&&(e="none"==t[r].style.display,t[r].style.display="none",e||setTimeout(_bind(function(e){trigger("hidden",e,this),emit("hidden",this,e)},this,t[r]),0))},ClickwrapGroup.prototype.handleClick=function(e){if(e&&e.target){for(var t,n=this,r=n.site.get(_signer_id)||!0,i=[],a=[],o=[],s={},l="BUTTON"==e.target.tagName||e.target.checked,d=e.target.value.split(","),c=0;c<d.length;c++)t=d[c].split(":"),l&&n.sent[t[0]]===r||(i.push(t[0]),a.push(t[1]),2<t.length&&o.push(t[2])),n.checked.data.set(t[0],l);if(trigger(l?"checked":"unchecked",e.target,n),emit(l?"checked":"unchecked",n,e.target),i.length){if(s[_contracts]=i,s[_versions]=a,o.length&&(s[_revisions]=o),n.get(_render_id)&&(s[_render_id]=n.get(_render_id)),"BUTTON"==e.target.tagName&&this.get(_element)){for(var u=getByClassName(this.get(_element),"ps-attr"),_=this.site.get(_custom_data)||{},c=0;c<u.length;c++)_[u[c].getAttribute("name")]=u[c].value;s[_custom_data]=_,n.send("updated",s)}l?n.send(n.get(_policy)?"opted_in":"agreed",s):n.get(_allow_disagreed)&&n.send("disagreed",s)}else n.updateHiddenInput(!n.block())}},ClickwrapGroup.prototype.togglePane=function(e){if(e&&e.target){var t=this.get(_object_name),n=this.get(_contract_class),r=e.target.parentElement,i=null,a=null,o=null;if(hasClass(e.target,"ps-accordion-link"))for(var s=getByClassName(this.get(_element),"ps-contract"),l=0;l<s.length;l++)s[l].dataset.cid==e.target.dataset.cid&&(r=s[l]);for(;r;){if(hasClass(r,n)){i=(i=getByClassName(r,"ps-"+t+"-body"))&&0<i.length?i[0]:null,a=(a=getByClassName(r,"ps-expand-button"))&&0<a.length?a[0]:null,o=(o=getByClassName(r,"ps-collapse-button"))&&0<o.length?o[0]:null,hasClass(e.target,"ps-collapse-button")||hasClass(e.target,"ps-"+t+"-target")&&e.target.checked?(i&&(i.style.display="none"),o&&(o.style.display="none"),a&&(a.style.display="inline-block"),removeClass(r,"ps-expanded")):(hasClass(e.target,"ps-expand-button")||hasClass(e.target,"ps-"+t+"-target")&&!e.target.checked)&&(i&&(i.style.display="block"),a&&(a.style.display="none"),o&&(o.style.display="inline-block"),addClass(r,"ps-expanded"));break}r=r.parentElement}}},ClickwrapGroup.prototype.handleInput=function(e){e&&e.target&&this.site.set(_signer_id,e.target.value)},ClickwrapGroup.prototype.handleAttributeInput=function(e){var t,n;e&&e.target&&(t=e.target,getElement(this.get(_signer_id_selector)),hasClass(t,"ps-attr")&&(n=getAttribute(t,"data-field")||getAttribute(t,"name"),isBlank(n)||"signer_id"==n||((e=!(e=this.site.get(_custom_data))||"object"!=typeof e?{}:e)[n]=t.value,this.site.set(_custom_data,e))))},ClickwrapGroup.prototype.block=function(){var e=!1,t=this.get(_display_all),n=this.get(_contracts);if(n)for(var r=0;r<n.length;r++)if(!this.agreed.data.get(n[r])||t&&!this.checked.data.get(n[r])){e=!0;break}return e},ClickwrapGroup.prototype.allAgreed=function(){var e=!0,t=this.get(_contracts);if(t)for(var n=0;n<t.length;n++)if(!this.agreed.data.get(t[n])){e=!1;break}return e},ClickwrapGroup.prototype.allChecked=function(){var e=!0,t=this.get(_contracts);if(t)for(var n=0;n<t.length;n++)if(!this.checked.data.get(t[n])){e=!1;break}return e};var BrowsewrapGroup=function(e){var n=this;function t(e,t){n.parameters.data.set(e,t)}n.parameters=new ParameterStore(n),n.rendered=!1,n.badgeInjected=!1,n.eventsAttached=!1,t(_key,e[_key]),t(_type,e[_type]),t(_group,e[_group]||e[_agreement_group]),t(_contracts,e[_contracts]||e[_agreements]||[]),t(_versions,e[_versions]||[]),t(_major_versions,e[_major_versions]||[]),t(_target_selector,e[_selector]||e[_target_selector]),t(_element,e[_selector]||e[_target_selector]),t(_style,e[_style]),t(_position,e[_position]||"auto"),t(_class_name,e[_class_name]||"ps-browsewrap-badge"),t(_stylesheet,e[_stylesheet]),t(_legal_center_url,e[_legal_center_url]),t(_open_legal_center,e[_open_legal_center]),t(_always_visible,e[_always_visible]),t(_badge_text,e[_badge_text]),t(_badge_updater,noop),t(_update_interval,e[_update_interval]||200),t(_dynamic,e[_dynamic]),t(_render_id,e[_render_id]),t(_render_data,e[_render_data]),_PactSafe("onReady",function(){n.listenForElement(n.get(_target_selector),_bind(n.render,n))}),_listenTo("set:"+_always_visible,function(){!0===n.get(_always_visible)?n.removeEvents():!1===n.get(_always_visible)&&n.setupEvents()}),_listenTo("set:"+_position,function(){!0===n.badgeInjected&&n.updatePosition()})},styleProcessor1=function(e){e=window.getComputedStyle(e).overflowY;return"auto"==e||"scroll"==e},styleProcessor2=function(e){e=e.currentStyle.overflowY;return"auto"==e||"scroll"==e},styleProcessor3=function(e){return"scroll"==e.style.overflow||"scroll"==e.style.overflowY||"auto"==e.style.overflow||"auto"==e.style.overflowY||e.clientHeight<e.scrollHeight},inViewport=function(e){var t;return!(!e||1!==e.nodeType)&&(t=document.documentElement,!!(e=e.getBoundingClientRect())&&0<=e.bottom&&0<=e.right&&e.top<=(window.innerHeight||t.clientHeight)&&e.left<=(window.innerWidth||t.clientWidth))};BrowsewrapGroup.prototype.toString=function(){return"[object BrowsewrapGroup]"},BrowsewrapGroup.prototype.toJSON=function(){return this.getParams()},BrowsewrapGroup.prototype.get=function(e){return this.parameters.get(e)},BrowsewrapGroup.prototype.set=function(e,t){this.parameters.set(e,t)},BrowsewrapGroup.prototype.extend=function(e,t){this.parameters.extend(e,t)},BrowsewrapGroup.prototype.getParams=function(e){return e=this.getOverrides(e),this.site.getParams(e)},BrowsewrapGroup.prototype.getPayload=function(e){return e=this.getOverrides(e),this.site.getPayload(e)},BrowsewrapGroup.prototype.getOverrides=function(e){var t=this;return(e=!e||"object"!=typeof e?{}:e)[_contracts]=e[_contracts]||t.get(_contracts),e[_versions]=e[_versions]||t.get(_versions),e[_group]=t.get(_group),e[_render_id]=t.get(_render_id),e[_context]=t,e},BrowsewrapGroup.prototype.send=function(e){var t,n;arguments.length<1||(n="string"==typeof e?(t=e,[].slice.call(arguments,1)):(t=e&&e[_event_type],arguments),t&&(n=toObject(sendCommandOptions[t]||[],n),(n=this.getOverrides(n))[_event_type]=t,this.site.send(t,n)))},BrowsewrapGroup.prototype.openLegalCenter=function(e){if(this.send("visited"),e&&e.target&&e.target.hasAttribute("data-url"))return window.open(getAttribute(e.target,"data-url"),"_blank")},BrowsewrapGroup.prototype.render=function(e){var t=this,n=t.get(_element);t.rendered&&!e||n&&(t.wrapElement(),t.rendered=!0,setTimeout(function(){trigger("rendered",t),emit("rendered",t,n)},0),t.get(_always_visible)?(e=t.updateBadge(t.get(_badge_element)),t.set(_badge_updater,e),e&&isFunction(e)&&e.call(window,null,!0)):t.setupEvents())},BrowsewrapGroup.prototype.listenForElement=function(i,a){var o=this,s=!1,e=function(e,t){var n=getElement(i),r=o.get(_badge_element);if(null!=r&&null!=n&&n.parentNode!=r.parentNode&&!o.reRendering)return o.reRendering=!0,o.removeEvents(),o.render(!0),void(o.reRendering=!1);s||n&&(s=!0,a&&isFunction(a)&&a.call(this))};window.MutationObserver&&isFunction(window.MutationObserver)?new MutationObserver(e).observe(document,{attributes:!0,childList:!0,subtree:!0}):listenTo(document,"DOMNodeInserted",e,!1),e()},BrowsewrapGroup.prototype.listenForScrollElement=function(r){var i=this,a=!1,o=null,o=_debounce(function(e,t){var n;a?t&&isFunction(t.disconnect)&&t.disconnect():(n=i.findScrollParent())&&(a=!0,t&&isFunction(t.disconnect)?t.disconnect():stopListening(window,"DOMContentLoaded",o),stopListening(window,"resize",o),listenTo(n,"scroll",r,!1),i.set(_scroll_element,n))},300),e=null;window.MutationObserver&&isFunction(window.MutationObserver)?(e=new MutationObserver(o)).observe(document,{attributes:!0,childList:!0,subtree:!0}):listenTo(document,"DOMContentLoaded",o),o(null,e)},BrowsewrapGroup.prototype.findScrollParent=function(){for(var e=this.get(_element).parentElement,t=null,t=window.getComputedStyle&&isFunction(window.getComputedStyle)?styleProcessor1:void 0!==e.currentStyle?styleProcessor2:styleProcessor3;e&&!t(e);)e=e.parentElement;return e},BrowsewrapGroup.prototype.wrapElement=function(){var e=this.get(_element);if(!e)return!1;var t=document.createElement(e.tagName.toLowerCase());t.className=this.get(_class_name),t.innerHTML=this.get(_badge_text)||e.innerHTML,setAttribute(t,["data-key","data-gid","data-cid","data-vid"],[this.get(_key),this.get(_group),this.get(_contracts).join(","),this.get(_versions).join(",")]),this.get(_open_legal_center)&&("A"==e.tagName?(e.hasAttribute("href")&&setAttribute(e,"data-href",getAttribute(e,"href")),setAttribute(e,"href",this.get(_legal_center_url)),e.hasAttribute("title")&&setAttribute(t,"title",getAttribute(e,"title")),setAttribute(t,["data-href","href","target"],[getAttribute(e,"data-href"),this.get(_legal_center_url),"_blank"])):(setAttribute(e,"data-url",this.get(_legal_center_url)),setAttribute(t,"data-url",this.get(_legal_center_url))),listenTo(e,"click",_bind(this.openLegalCenter,this),!1),listenTo(t,"click",_bind(this.openLegalCenter,this),!1));var n=document.createElement("div");return setAttribute(n,"id","ps-badge-"+this.get(_key)),n.className="ps-browsewrap-wrapper",n.innerHTML=this.get(_stylesheet),e.parentNode.insertBefore(n,e),n.appendChild(e),n.appendChild(t),this.badgeInjected=!0,this.set(_badge_element,t),this.updatePosition(),t},BrowsewrapGroup.prototype.setupEvents=function(){var e,t;this.eventsAttached||(e=this.get(_badge_element),t=this.findScrollParent(),e=this.updateBadge(e),this.set(_badge_updater,e),listenTo(window,"DOMContentLoaded",e,!1),listenTo(window,"load",e,!1),listenTo(window,"scroll",e,!1),listenTo(window,"resize",e,!1),t?(this.set(_scroll_element,t),listenTo(t,"scroll",e,!1)):this.listenForScrollElement(e),t=null,window.MutationObserver&&isFunction(window.MutationObserver)?((t=new MutationObserver(e)).observe(document,{attributes:!0,childList:!0,subtree:!0}),this.set(_mutation_observer,t)):listenTo(document,"DOMNodeInserted",e),this.eventsAttached=!0)},BrowsewrapGroup.prototype.removeEvents=function(){var e,t,n;this.eventsAttached&&(e=this.get(_badge_updater),t=this.get(_scroll_element),n=this.get(_mutation_observer),stopListening(window,"DOMContentLoaded",e,!1),stopListening(window,"load",e,!1),stopListening(window,"scroll",e,!1),stopListening(window,"resize",e,!1),t&&stopListening(t,"scroll",e,!1),n&&isFunction(n.disconnect)&&n.disconnect(),e&&isFunction(e)&&e.call(window,null,!0),this.eventsAttached=!1)},BrowsewrapGroup.prototype.updatePosition=function(){var e=this.get(_element),t=this.get(_badge_element);if(!e||!t)return!1;switch(t.style.marginLeft&&t.style.removeProperty("margin-left"),this.get(_position)){case"left":t.style.left="20px",t.style.right="auto";break;case"right":t.style.left="auto",t.style.right="20px";break;case"center":t.style.left="50%",t.style.right="auto",t.style.display="inline-block",0<t.offsetWidth&&(t.style.marginLeft="-"+Math.floor(t.offsetWidth/2)+"px"),t.style.removeProperty("display");break;default:t.style.left=e.getBoundingClientRect().left+"px",t.style.right="auto"}setAttribute(t,"data-position",this.get(_position))},BrowsewrapGroup.prototype.updateBadge=function(n){var r=this,i=null,e=null;return(e=_throttle(function(e,t){if(e&&"resize"==e.type&&"auto"==getAttribute(n,"data-position")&&r.updatePosition(),!0===t)return i=null,void addClass(n,"ps-browsewrap-stuck");t=inViewport(n.parentElement);t!==i?((i=t)?removeClass:addClass)(n,"ps-browsewrap-stuck"):i=t},r.get(_update_interval)))(),e},BrowsewrapGroup.prototype.forceUpdate=function(){var e=this.get(_badge_updater);e&&isFunction(e)&&e.apply(window,arguments)};var _grp=defineGroup("group",ClickwrapGroup),_bdg=defineGroup("badge",BrowsewrapGroup),commandExecution=function(e){if(isFunction(e[0]))this.method=e[0];else{var t=commandStringFormat.exec(e[0]);if(null!=t&&4==t.length&&(this.siteName=t[1]||"s0",this.groupName=t[2]||"",this.methodName=t[3],this.args=[].slice.call(e,1),this.groupName&&null!=this.groupName||(this.isCreate="create"==this.methodName,this.isRemove="remove"==this.methodName,this.isLoad="load"==this.methodName,this.isInitialize="initialize"==this.methodName),this.isGlobal="onReady"==this.methodName),!this.methodName)throw"command_missing_method";if(this.isInitialize){if(this.args.length<1||isBlank(this.args[0]))throw"command_missing_key"}else if(this.isLoad&&(this.args.length<1||"string"!=typeof this.args[0]&&"object"!=typeof this.args[0]))throw"command_missing_key";if(containsPeriodOrColon(this.siteName)||containsPeriodOrColon(this.groupName))throw"command_invalid_format"}},commandStringFormat=/^(?:([\w\-\_]+)\.)?(?:([\w\-\_]+):)?(\w+)$/,containsPeriodOrColon=function(e){return 0<=e.indexOf(".")||0<=e.indexOf(":")},Runner={ps:function(){Runner.commands=[],Runner.onReady=[],Runner.listeners={all:[]},Runner.listenersOnce={},Runner.listenersInternal={all:[]},Runner.listenersOnceInternal={}}};Runner.ps(),Runner.addListeners=function(e){for(var t=0;t<arguments.length;t++)_PactSafe.on.apply(this,arguments[t])},Runner.addListenersOnce=function(e){for(var t=0;t<arguments.length;t++)_PactSafe.once.apply(this,arguments[t])},Runner.removeListeners=function(e){for(var t=0;t<arguments.length;t++)_PactSafe.off.apply(this,arguments[t])},Runner.executeCommands=function(e){var t=Runner.buildArray.apply(Runner,arguments),t=Runner.commands.concat(t);for(Runner.commands=[];0<t.length&&!Runner.run(t[0])&&(t.shift(),!(0<Runner.commands.length)););Runner.commands=Runner.commands.concat(t)},Runner.buildArray=function(e){for(var t=[],n=0;n<arguments.length;n++)try{var r=new commandExecution(arguments[n]);t.push(r)}catch(e){}return t},Runner.run=function(e){try{if(e.method)e.method.call(window,_PactSafe.getByName("s0"));else{var t=e.siteName==_globalName?_PactSafe:_PactSafe.getByName(e.siteName);if(e.isCreate)"s0"==e.siteName&&_PactSafe.create.apply(_PactSafe,e.args);else if(e.isRemove)_PactSafe.remove(e.siteName);else if(e.isGlobal)_PactSafe[e.methodName].apply(_PactSafe,e.args);else if(t)if(isBlank(e.groupName))if(e.isInitialize){if(!1!==t.groups.getLoading(e.args[0]))t[e.methodName].apply(t,e.args);else for(var n=_PactSafe.getAll(),r=0,i=n.length;r<i;r++)if(!1!==n[r].groups.getLoading(e.args[0])){n[r][e.methodName].apply(n[r],e.args);break}}else t[e.methodName].apply(t,e.args);else{var a=t.groups.get(e.groupName);a&&a[e.methodName].apply(a,e.args)}}}catch(e){}};var _PactSafe=function(e){Runner.executeCommands.apply(Runner,[arguments])};_PactSafe.Sites={},_PactSafe.initiatedTime=0,_PactSafe.realThang=317,_PactSafe.readyFired=!1,_PactSafe.readyHandlersAttached=!1,_PactSafe.envAPI="pactsafe.io",_PactSafe.envVault="vault.pactsafe.io";var createOptions=[_site_id,_name];_PactSafe.create=function(e){var t=toObject(createOptions,[].slice.call(arguments));t.name||(t.name="s0");var n=""+t.name;if(_PactSafe.Sites[n])return _PactSafe.Sites[n];t=new Site(t);return _PactSafe.Sites[n]=t,_PactSafe.site||(_PactSafe.site=t),trigger("create",t),t},_PactSafe.remove=function(e){_PactSafe.Sites[e]&&(_PactSafe.Sites[e]=null)},_PactSafe.getByName=function(e){return _PactSafe.Sites[e]},_PactSafe.getAll=function(){var e,t=[];for(e in _PactSafe.Sites)_PactSafe.Sites.hasOwnProperty(e)&&t.push(_PactSafe.Sites[e]);return t},_PactSafe.getByKey=function(e){for(var t=_PactSafe.getAll(),n=null,r=0,i=t.length;r<i&&!(n=t[r].groups.get(e));r++);return n},_PactSafe.getAllGroups=function(){for(var e=_PactSafe.getAll(),n=[],t=0,r=e.length;t<r;t++)e[t].groups.initialized.map(function(e,t){n.push(t)});return n},_PactSafe.onReady=function(e,t){isFunction(e)&&(_PactSafe.readyFired?setTimeout(function(){e()},1):Runner.onReady.push(e))},_PactSafe.on=function(e,t){isFunction(t)&&(Runner.listeners[e]||(Runner.listeners[e]=[]),Runner.listeners[e].push(t))};var _listenTo=function(e,t){isFunction(t)&&(Runner.listenersInternal[e]||(Runner.listenersInternal[e]=[]),Runner.listenersInternal[e].push(t))};_PactSafe.once=function(e,t){isFunction(t)&&(Runner.listenersOnce[e]||(Runner.listenersOnce[e]=[]),Runner.listenersOnce[e].push(t))};var _listenToOnce=function(e,t){isFunction(t)&&(Runner.listenersOnceInternal[e]||(Runner.listenersOnceInternal[e]=[]),Runner.listenersOnceInternal[e].push(t))};_PactSafe.off=function(e,t){if(e)if(isFunction(t)){var n,t=t.toString();if(Runner.listeners[e]){for(var r=0;r<Runner.listeners[e].length;r++)if(Runner.listeners[e][r].toString()===t){n=r;break}-1<n&&Runner.listeners[e].splice(n,1)}if(Runner.listenersOnce[e]){for(r=0;r<Runner.listenersOnce[e].length;r++)if(Runner.listenersOnce[e][r].toString()===t){n=r;break}-1<n&&Runner.listenersOnce[e].splice(n,1)}}else Runner.listeners[e]&&(Runner.listeners[e]=[]),Runner.listenersOnce[e]&&(Runner.listenersOnce[e]=[]);else Runner.listeners={all:[]},Runner.listenersOnce={}};var _stopListening=function(e,t){if(e)if(isFunction(t)){var n,t=t.toString();if(Runner.listenersInternal[e]){for(var r=0;r<Runner.listenersInternal[e].length;r++)if(Runner.listenersInternal[e][r].toString()===t){n=r;break}-1<n&&Runner.listenersInternal[e].splice(n,1)}if(Runner.listenersOnceInternal[e]){for(r=0;r<Runner.listenersOnceInternal[e].length;r++)if(Runner.listenersOnceInternal[e][r].toString()===t){n=r;break}-1<n&&Runner.listenersOnceInternal[e].splice(n,1)}}else Runner.listenersInternal[e]&&(Runner.listenersInternal[e]=[]),Runner.listenersOnceInternal[e]&&(Runner.listenersOnceInternal[e]=[]);else Runner.listenersInternal={all:[]},Runner.listenersOnceInternal={}},trigger=function(e){var t=[].slice.call(arguments,1);if(Runner.listeners[e])for(var n=0;n<Runner.listeners[e].length;n++)Runner.listeners[e][n].apply(_PactSafe,t);if(Runner.listenersOnce[e]){for(n=0;n<Runner.listenersOnce[e].length;n++)Runner.listenersOnce[e][n].apply(_PactSafe,t);Runner.listenersOnce[e]=[]}for(n=0;n<Runner.listeners.all.length;n++)Runner.listeners.all[n].apply(_PactSafe,arguments);triggerInternal.apply(this,arguments)},triggerInternal=function(e){var t=[].slice.call(arguments,1);if(Runner.listenersInternal[e])for(var n=0;n<Runner.listenersInternal[e].length;n++)Runner.listenersInternal[e][n].apply(_PactSafe,t);if(Runner.listenersOnceInternal[e]){for(n=0;n<Runner.listenersOnceInternal[e].length;n++)Runner.listenersOnceInternal[e][n].apply(_PactSafe,t);Runner.listenersOnceInternal[e]=[]}for(n=0;n<Runner.listenersInternal.all.length;n++)Runner.listenersInternal.all[n].apply(_PactSafe,arguments)};function ready(){if(!_PactSafe.readyFired){_PactSafe.readyFired=!0;for(var e=0;e<Runner.onReady.length;e++)isFunction(Runner.onReady[e])&&Runner.onReady[e]();Runner.onReady=[]}}function readyStateChange(){"complete"===document.readyState&&ready()}function attachReadyHandlers(){"complete"===document.readyState?setTimeout(ready,1):_PactSafe.readyHandlersAttached||(document.addEventListener?(document.addEventListener("DOMContentLoaded",ready,!1),window.addEventListener("load",ready,!1)):(document.attachEvent("onreadystatechange",readyStateChange),window.attachEvent("onload",ready)),_PactSafe.readyHandlersAttached=!0)}_PactSafe.enableDebug=function(e){_PactSafe.disableDebug(),e&&isFunction(e)&&(_PactSafe.debug=e),_listenTo("all",isFunction(_PactSafe.debug)?_PactSafe.debug:logDebug),_PactSafe.debugging=!0},_PactSafe.disableDebug=function(){_stopListening("all",isFunction(_PactSafe.debug)?_PactSafe.debug:logDebug),_PactSafe.debugging=!1},_PactSafe.setup=function(){var e=window[_globalName];if(!e||317!=e.realThang){_PactSafe.initiatedTime=e&&e.t,_PactSafe.loaded=!0,_PactSafe.debug=e&&e.debug||!1,_PactSafe.debug&&_PactSafe.enableDebug();var t,n=window[_globalName]=_PactSafe;if(defineMethod("create",n,n.create),defineMethod("remove",n,n.remove),defineMethod("getByName",n,n.getByName),defineMethod("getAll",n,n.getAll),defineMethod("getByKey",n,n.getByKey),defineMethod("getAllGroups",n,n.getAllGroups),defineMethod("onReady",n,n.onReady),defineMethod("on",n,n.on),defineMethod("once",n,n.once),defineMethod("off",n,n.off),defineMethod("enableDebug",n,n.enableDebug),defineMethod("disableDebug",n,n.disableDebug),defineMethod("get",n=Site.prototype,n.get),defineMethod("set",n,n.set),defineMethod("send",n,n.send),defineMethod("retrieve",n,n.retrieve),defineMethod("initialize",n,n.initialize),defineMethod("load",n,n.load),defineMethod("render",n,n.render),defineMethod("getByKey",n,n.getByKey),defineMethod("getAllGroups",n,n.getAllGroups),defineMethod("get",n=ClickwrapGroup.prototype,n.get),defineMethod("set",n,n.set),defineMethod("send",n,n.send),defineMethod("render",n,n.render),defineMethod("display",n,n.display),defineMethod("displayRequired",n,n.displayRequired),defineMethod("displayAll",n,n.displayAll),defineMethod("hide",n,n.hide),defineMethod("hideAll",n,n.hideAll),defineMethod("getAgreed",n,n.getAgreed),defineMethod("getChecked",n,n.getChecked),defineMethod("sendChecked",n,n.sendChecked),defineMethod("get",n=BrowsewrapGroup.prototype,n.get),defineMethod("set",n,n.set),defineMethod("send",n,n.send),defineMethod("render",n,n.render),defineMethod("openLegalCenter",n,n.openLegalCenter),defineMethod("findScrollParent",n,n.findScrollParent),defineMethod("wrapElement",n,n.wrapElement),defineMethod("setupEvents",n,n.setupEvents),defineMethod("removeEvents",n,n.removeEvents),defineMethod("forceUpdate",n,n.forceUpdate),defineMethod("get",n=ParameterStore.prototype,n.get),defineMethod("set",n,n.set),!isHTTPS()&&!_forceSSL){e:{for(var r=document.getElementsByTagName("script"),i=0;i<r.length&&i<100;i++){var a=r[i].src;if(a&&0==a.indexOf("https://"+_PactSafe.envVault+"/ps.min.js")){t=!0;break e}}t=!1}t&&(_forceSSL=!0)}e&&(isArray(e.e)&&Runner.addListeners.apply(_PactSafe,e.e),isArray(e.eo)&&Runner.addListenersOnce.apply(_PactSafe,e.eo),isArray(e.o)&&Runner.removeListeners.apply(_PactSafe,e.o),trigger("ready"),isArray(e.q)&&Runner.executeCommands.apply(_PactSafe,e.q))}},attachReadyHandlers();var executeIfLoaded=function(e){return"prerender"!=document.visibilityState&&(e(),!0)},gi,hi,fi;fi=_PactSafe.setup,executeIfLoaded(fi)||(gi=!1,hi=function(){!gi&&executeIfLoaded(fi)&&(gi=!0,stopListening(document,"visibilitychange",hi))},listenTo(document,"visibilitychange",hi))}(window);